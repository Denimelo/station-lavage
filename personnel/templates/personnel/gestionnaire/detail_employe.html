{% extends "base_dashboard.html" %}

{% block dashboard_content %}

<h2>Détails de {{ employe.prenom }} {{ employe.nom }}</h2>

<ul class="list-group mb-4">
  <li class="list-group-item"><strong>Email :</strong> {{ employe.email }}</li>
  <li class="list-group-item"><strong>Statut :</strong> 
    {% if employe.is_active %}
      <span class="badge bg-success">Actif</span>
    {% else %}
      <span class="badge bg-secondary">Inactif</span>
    {% endif %}
  </li>
  <li class="list-group-item"><strong>Réservations terminées :</strong> {{ nb_terminees }}</li>
  <li class="list-group-item"><strong>Réservations annulées :</strong> {{ nb_annulees }}</li>
  <li class="list-group-item"><strong>Prime actuelle :</strong> {{ employe.prime }} F CFA</li>
</ul>

<h4>Historique des prestations</h4>
<table class="table table-bordered">
  <thead>
    <tr>
      <th>#</th>
      <th>Véhicule</th>
      <th>Service</th>
      <th>Date</th>
      <th>Statut</th>
    </tr>
  </thead>
  <tbody>
    {% for r in reservations %}
    <tr>
      <td>{{ r.id }}</td>
      <td>{{ r.vehicule.plaque_immatric }}</td>
      <td>{{ r.service.nom }}</td>
      <td>{{ r.heure_debut|date:"d/m/Y H:i" }}</td>
      <td>
        <span class="badge bg-{{ r.statut|yesno:'success,warning,secondary,danger' }}">{{ r.get_statut_display }}</span>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<a href="{% url 'personnel:liste_employes' %}" class="btn btn-secondary mt-3">Retour</a>
{% endblock %}
