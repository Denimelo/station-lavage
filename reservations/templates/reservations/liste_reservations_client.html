{% extends "base_dashboard.html" %}

{% block dashboard_content %}
<h2>Mes réservations</h2>

{% if reservations %}
  <div class="list-group">
    {% for r in reservations %}
      <div class="list-group-item">
        <strong>{{ r.vehicule.marque }} {{ r.vehicule.modele }}</strong> –
        {{ r.service.nom }} |
        {{ r.heure_debut|date:"d/m/Y H:i" }} → {{ r.heure_fin|date:"H:i" }}


        <span class="badge 
          {% if r.statut == 'terminee' %}bg-success
          {% elif r.statut == 'en_cours' %}bg-warning
          {% elif r.statut == 'assignee' %}bg-info text-dark
          {% elif r.statut == 'annulee' %}bg-danger
          {% else %}bg-secondary{% endif %}">
          <a href="{% url 'reservations:suivi_reservation' r.id %}" class="btn btn-sm btn-outline-info">
            Suivre
          </a>
        </span>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">Vous n’avez encore effectué aucune réservation.</p>
  <a href="{% url 'reservations:creer_reservation' %}" class="btn btn-primary">Réserver un service</a>
{% endif %}
{% endblock %}
